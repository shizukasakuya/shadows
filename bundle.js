(()=>{const e=document.getElementById("gameCanvas"),t=e.getContext("2d");let s,n,i,a,o=0,h=[],r=[],l=0,m=[],d=0,g={active:!1,duration:0,startTime:0};const c=120,u=110,f=["I've failed them","I'm not enough","I can't do this","What's the point?","Nobody understands","I'm always messing up","I'll never be good enough","Everything is my fault","I'm so stupid","I'm a disappointment","I'm wasting my life","I'll always be alone","I don't deserve happiness","I'm a burden to everyone","Things will never get better","I'm trapped","No one cares","It's hopeless","I'm worthless","I'll always be a failure","I'm unlovable","I don't belong anywhere","I'm weak","I'll never succeed","Everything is falling apart"],p=["This is possible","There's a way","I can learn from this","One step at a time","I am resilient","I have overcome before","I am worthy","Progress, not perfection","I choose to keep going","This too shall pass","I am enough","Every day is a new chance","I can handle this","I believe in myself","Small steps lead to big changes","I'm growing stronger","I have value","I can adapt","I'm making progress","I'm capable of change","My efforts matter","I deserve joy","I'm finding my way","I have inner strength","Better days are coming"];class y{constructor(e,t){this.segments=[],this.numSegments=15,this.segmentLength=8,this.baseSpeed=.01+.02*Math.random(),this.turnSpeed=.03,this.wiggleAmplitude=.05,this.angle=Math.atan2(t-a,e-i),this.behavior=this.randomBehavior();let s=e,n=t;for(let e=0;e<this.numSegments;e++)this.segments.push({x:s,y:n}),s+=(Math.random()-.5)*this.segmentLength,n+=(Math.random()-.5)*this.segmentLength}randomBehavior(){const e=["normal","aggressive","hesitant","erratic"];return e[Math.floor(Math.random()*e.length)]}update(){const e=this.segments[0].x-i,t=this.segments[0].y-a,s=Math.sqrt(e*e+t*t);let n=Math.min(2,s/c);switch(this.behavior){case"aggressive":n*=1.5,this.turnSpeed=.05;break;case"hesitant":n*=.7,this.turnSpeed=.02;break;case"erratic":n*=1+.5*(Math.random()-.5),this.wiggleAmplitude=.1}this.angle+=this.baseSpeed*(s<144?2:n);const o=i+Math.cos(this.angle)*c,h=a+Math.sin(this.angle)*c,r=this.segments[0];r.x+=(o-r.x)*this.turnSpeed,r.y+=(h-r.y)*this.turnSpeed,r.x+=(Math.random()-.5)*this.wiggleAmplitude,r.y+=(Math.random()-.5)*this.wiggleAmplitude;for(let e=1;e<this.numSegments;e++){const t=this.segments[e],s=this.segments[e-1],n=s.x-t.x,i=s.y-t.y,a=Math.sqrt(n*n+i*i);if(a>this.segmentLength){const e=(a-this.segmentLength)/a;t.x+=n*e,t.y+=i*e}}}draw(){t.strokeStyle="rgba(0, 0, 0, 0.7)",t.lineWidth=4,t.lineCap="round",t.lineJoin="round",t.beginPath(),t.moveTo(this.segments[0].x,this.segments[0].y);for(const e of this.segments)t.lineTo(e.x,e.y);t.stroke(),t.fillStyle="rgba(0, 0, 0, 0.9)",t.beginPath(),t.arc(this.segments[0].x,this.segments[0].y,3,0,2*Math.PI),t.fill()}}class v{constructor(e,t,s,n){this.text=e,this.x=t,this.y=s,this.opacity=1,this.fadeSpeed=.0015,this.isPositive=n}update(){return this.opacity-=this.fadeSpeed,this.opacity>0}draw(){t.font=this.isPositive?"16px Arial":"bold 16px Arial",t.fillStyle=this.isPositive?`rgba(100, 100, 100, ${this.opacity})`:`rgba(0, 0, 0, ${this.opacity})`,t.fillText(this.text,this.x,this.y)}}function I(){s=window.innerWidth,n=window.innerHeight,e.width=s,e.height=n}function w(e){i=e.clientX,a=e.clientY}function b(e){e.preventDefault(),i=e.touches[0].clientX,a=e.touches[0].clientY}function M(e){t.fillStyle="white",t.fillRect(0,0,s,n),function(){const e=h.filter((e=>{const t=e.segments[0].x-i,s=e.segments[0].y-a;return Math.sqrt(t*t+s*s)<144})).length/h.length,t=Math.max(0,2*(e-.5)),s=o;o+=.05*(t-o),(s<=.5&&o>.5||s>.5&&o<=.5)&&(g.active=!0,g.duration=500,g.startTime=performance.now()),s>.5&&o<=.5&&(d=performance.now(),r=r.filter((e=>e.isPositive)))}(),x(),h.forEach((e=>{e.update(),e.draw()})),r=r.filter((e=>e.update())),r.forEach((e=>e.draw())),function(e){if(e-l>2e3){const t=o>.5;if(!t&&e-d<2e3)return;const i=50,a=Math.random()*(s-2*i)+i,h=Math.random()*(n-2*i)+i,g=t?f:p;let c;do{c=g[Math.floor(Math.random()*g.length)]}while(m.includes(c));m.push(c),m.length>7&&m.shift(),r.push(new v(c,a,h,!t)),l=e}}(e),S(),g.active&&function(e){const i=e-g.startTime,a=Math.min(i/g.duration,1),o=5*(1-a),l=(Math.random()-.5)*o,m=(Math.random()-.5)*o;t.save(),t.translate(l,m);const d=10*(1-a);t.filter=`blur(${d}px)`,t.clearRect(-l,-m,s,n),x(),h.forEach((e=>e.draw())),r.forEach((e=>e.draw())),S(),t.restore(),a>=1&&(g.active=!1)}(e),requestAnimationFrame(M)}function x(){if(o>0){const e=t.createRadialGradient(i,a,.7*u,i,a,u);e.addColorStop(0,"rgba(0, 0, 0, 0)"),e.addColorStop(1,`rgba(0, 0, 0, ${.7*o})`),t.fillStyle=e,t.fillRect(0,0,s,n)}}function S(){t.fillStyle="rgba(255, 0, 0, 0.7)",t.beginPath(),t.arc(i,a,8,0,2*Math.PI),t.fill()}!function(){I(),window.addEventListener("resize",I),e.addEventListener("mousemove",w),e.addEventListener("touchmove",b),i=s/2,a=n/2;for(let e=0;e<30;e++){const t=e/30*Math.PI*2,s=i+240*Math.cos(t),n=a+240*Math.sin(t);h.push(new y(s,n))}M()}()})();